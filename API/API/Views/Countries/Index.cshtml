@inject Microsoft.AspNetCore.Hosting.IWebHostEnvironment hostingEnv
@using API.Helpers;

@model IndexPage

@{
    ViewData["Title"] = $"Types of {Model.Country.Citizen} visas - tourist, nomad and other in {DateTime.Now.Year}."; // Model.Header.CountryName + " Visa Policy";
    ViewData["MetaDescription"] = $"List of {Model.Country.Citizen} visas types, period of validity, duration of stay, number of entries, and other parameters in {DateTime.Now.Year}.";
    ViewData["Canonical"] = $"https://glomad.net/{Model.Header.CountryName}";
}

@await Html.PartialAsync("_Header", Model.Header)

<section class="container py-3">

    @await Html.PartialAsync("_Menu", Model.Header.CountryName)

    @if (ViewContext.HttpContext.Request.Path.Value.Contains("Visa"))
    {
        @await Html.PartialAsync("Visa")
    }
    else
    {
        <div class="row">

            <div class="col-md-12">
                <h2 class="text-center p-4">💳 List of @Model.Header.CountryName visa types</h2>

@*        <div class="row row-cols-1 row-cols-lg-4 row-cols-md-3 g-4">*@

            @if (Model.NoVisaEntry != null)
            {
                <div class="row mb-3 rounded-3 border shadow-sm bg-info bg-gradient">
                    <div class="col-md-3 p-3">
                        <p class="card-title text-white align-middle pb-3 fw-bold">Visa-free entry</p>
                        @if (Model.NoVisaEntry.IsEVisaAvailable)
                        {
                            <p>
                                <a href="@Model.NoVisaEntry.EVisaUrl" target="_blank" rel="noopener nofollow noreferrer">
                                    <span class="m-2 badge rounded-pill bg-warning text-dark">💻 With E-Visa 👈</span>
                                </a>
                            </p>
                        }
                    </div>
                    <div class="col-md-9 p-3">
                        @if(Model.NoVisaEntry.Duration > 0)
                        {
                            <p class="align-middle rounded-3 py-2 px-3 bg-white-opacy">
                                🙌 @(Model.HomeCountry.Citizen + " сitizens" ?? "Сitizens of " + Model.HomeCountry.Name) can stay in the @Model.Header.CountryName @Model.NoVisaEntry.Duration days without visa.
                            </p>
                        }
                        <p class="align-middle rounded-3 py-2 px-3 bg-white-opacy">
                            ℹ @Model.NoVisaEntry.Description.StripHTML()
                        </p>
                    </div>
                </div>
            }

            @foreach (var visa in Model.Visas)
            {
                @await Component.InvokeAsync("VisaRow", visa)
            }
            <div class="p-2 bg-light rounded-3">
                <div>
                    <script src="//tp.media/content?currency=usd&promo_id=4044&shmarker=14510&campaign_id=100&trs=21653&target_host=search.jetradar.com&locale=en_us&limit=6&powered_by=false&destination=@Model.Country.CapitalCode" charset="utf-8"></script>
                </div>
            </div>
            </div>

            @*<div class="col-md-4">
              <div class="position-sticky" style="top: 2rem;">
                <div class="p-4 mb-3 bg-light rounded">
                    <h5 style="color: green">Open to visit</h5>
                    <div>
                        <h5 class="pb-2">COVID-19 statistics</h5>
                            <h6>Infection risk level</h6>
                            <p>📉 Moderate</p>

                            <h6>New COVID-19 cases in last 14 days</h6>
                            <p>🦠 43,65</p>
                            <p class="small text-muted">out of 100,000 people</p>
                    </div>
                    <p><a href="#" class="text-decoration-none">🌎 List</a> of All 120 embassies abound the world</p>
                    <p>✔ Citizens of <a href="#" class="text-decoration-none">140 coutries</a> allowed to visit Germany visa-free</p>
                    <p>✔ Citizens of Germany allowed to visit <a href="#" class="text-decoration-none">192 countries</a> visa-free</p>
                </div>

              </div>
            </div>*@
        </div>
        
    }


</section>

@section Scripts {
    <script>
        $(function () {
            $('[data-bs-toggle="tooltip"]').tooltip();
        })
    </script>
}